<html>
	<head>
		<title>ATKDEF - Analysis Tool Kit for Deciphering Encrypted Files</title>

		<script type="text/javascript" data-main="js/main" src="js/lib/require.js"></script>

<!--
		<script type="text/javascript" src="js/lib/jquery.min.js"></script>
		<script type="text/javascript" src="js/lib/jquery-ui.min.js"></script>
		<script type="text/javascript" src="js/lib/jquery.jsPlumb-1.3.16-all-min.js"></script>
		<script type="text/javascript" src="js/lib/knockout-min.js"></script>
		<script type="text/javascript" src="js/lib/underscore-min.js"></script>
		<script type="text/javascript" src="js/lib/underscore.partial.js"></script>

		<script type="text/javascript" src="js/log.js"></script>
		<script type="text/javascript" src="js/main.js"></script>
-->

		<link rel="stylesheet/less" type="text/css" href="less/main.less" />
		<script type="text/javascript" src="js/lib/less.min.js"></script>

	</head>

	<body>
		<div id="filePanel">

			<table id="fileTable">
				<tbody data-bind="foreach: files, attr: { 'data-filter': fileFilter }">
					<tr data-bind="css: {selected: $root.selectedFile() === $data, plainText: isPlainText(), cipherText: isCipherText()}, click: function() { $root.selectedFile($data) }">
						<td data-bind="text: name"></td>
					</tr>
				</tbody>
			</table>

			<div class="controls">
				<button data-bind="click: compose(addFiles, selectFiles)">Add Files</button>
				<button data-bind="click: compose(deleteFile, selectedFile), enable: selectedFile">Delete</button>
				<a class="button" data-bind="attr: { href: _.result(selectedFile(), 'toURL'), download: _.result(selectedFile(), 'name'), disabled: !selectedFile()}">Download</a>
				<button data-bind="click: compose(addFileComponent, selectedFile), enable: selectedFile">Add Component</button>

				<label>Filter:
					<select id="fileFilter" data-bind="value: fileFilter">
						<option>none</option>
						<option value="CipherText">ciphertext</option>
						<option value="PlainText">plaintext</option>
					</select>
				</label>	
			</div>
		</div>

		<div id="workPanel">
			<!-- ko foreach: components -->
				<div class="component" data-bind="component: $data">
					<span class="name" data-bind="text:name"></span>
					<ul class="inputs" data-bind="foreach: _.keys(inputs)">
						<li data-bind="text: $data"></li>
					</ul>
					<ul class="outputs" data-bind="foreach: _.keys(outputs)">
						<li data-bind="text: $data"></li>
					</ul>
				</div>
			<!-- /ko -->
		</div>

		<div id="componentPanel">
			<!-- ko foreach: window.components -->
				<button data-bind="text: $data.prototype.name, click: function() { $root.addComponent($data) }"></button>
			<!-- /ko -->
		</div>

		<div id="optionPanel">
			<!-- ko foreach: componentOptions -->
				<label><span data-bind="text: $data[0]"></span> <input type="text" data-bind="value: $data[1]" /></label>
			<!-- /ko -->
		</div>
	</body>
</html>